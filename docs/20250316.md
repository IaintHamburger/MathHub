# 2025-03-16 修改
😺 使用 PostgreSQL 記錄題目.
😺 增加 `./server/modules/db.ts`, 其中定義 PostgreSQL 連線池及程式終止時關閉連線池方法.
😺 修改 `./server/routes/quest_routes.ts`, 路由函式採用查詢 PostgreSQL 資料庫的方式獲取題目資料.
😸 增加  `./db/quest.dump`, 開發功能時使用的 PostgreSQL 資料表 `quest`.

# 開發 PostgreSQL 功能時使用的指令
- 開發時在 Windows 上使用 zip archive 版本運行 PostgreSQL 17.
- 根目錄為 `pgsql`.
    - `./bin/initdb.exe -D ./data`: 先建立 `data` 目錄，執行指令將 PostgreSQL 初始化設定檔案放置到 `data` 目錄.
    - `./bin/pg_ctl -D ./data -l logfile start`: 讀取 `data` 目錄中的設定檔案，啟動 PostgreSQL 服務，並於指令執行位置建立記錄檔案 `logfile`.
    - `./bin/createdb.exe -U <使用者名稱> -T template0 <資料庫名稱>`: 使用 `template0` 建立空白的資料庫，使用者名稱可能會在初始化時自動設定.
    - `./bin/psql.exe -U <使用者名稱> <資料庫名稱>`: 連接資料庫.
- 在進入資料庫後建立資料表，以下為 SQL 語法.
    - `CREATE EXTENSION IF NOT EXISTS "uuid-ossp";`: 由於題目 ID 採用 uuid4 格式，因此需要啟用 `uuid-ossp` 擴展以支援 `uuid_generate_v4()` 函數.
    
    ```SQL
    CREATE TABLE QUEST (
        ID UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
        TITLE TEXT NOT NULL,
        QUESTION TEXT NOT NULL,
        ANSWER TEXT NOT NULL,
        TAGS TEXT[]
    );
    ```
    - 建立資料表 `quest`. `TAGS` 為字串陣列型別，可以儲存多個標籤方便查詢.
    - `INSERT INTO QUEST (TITLE, QUESTION, ANSWER) VALUES ('標題', '題目', '答案');`: 新增題目, `ID` 會自動新增因而無須定義參數, `TAGS` 則不是必要參數.
